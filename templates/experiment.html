<!doctype html>
<html>

<head>
	<meta charset="UTF-8">

	
    <title>Lagebild simulation</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">

    <h1> <img id="fire_image" src="https://www.animatedimages.org/data/media/64/animated-fire-brigade-and-fire-department-image-0005.gif" alt="Fire">  Fire and Rescuer <img id="doggy_image" src="https://www.animatedimages.org/data/media/64/animated-fire-brigade-and-fire-department-image-0044.gif" alt="Firefighter Doggo" /></h1>
            
        
    

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"> </script>

    <!-- jobs 1 and 2 -->
    <script type=text/javascript> 
        $(function() { $("#job_button_1_start").click(function (event) { $.getJSON('/FunctionJob1Start', { }, function(data) { }); 
        return false; }); }); 
    </script> 
    <script type=text/javascript> $(function() { $("#job_button_1_end").click(function (event) { $.getJSON('/FunctionJob1End', { },
    function(data) { }); return false; }); }); </script> 
    <script type=text/javascript> $(function() { $("#job_button_2_start").click(function (event) { $.getJSON('/FunctionJob2Start', { },
    function(data) { }); return false; }); }); </script> 
    <script type=text/javascript> $(function() { $("#job_button_2_end").click(function (event) { $.getJSON('/FunctionJob2End', { },
    function(data) { }); return false; }); }); </script> 

    <!-- jobs 3 and 4 -->
    <script type=text/javascript> 
        $(function() { $("#job_button_3_start").click(function (event) { $.getJSON('/FunctionJob3Start', { }, function(data) { }); 
        return false; }); }); 
    </script> 
    <script type=text/javascript> $(function() { $("#job_button_3_end").click(function (event) { $.getJSON('/FunctionJob3End', { },
    function(data) { }); return false; }); }); </script> 
    <script type=text/javascript> $(function() { $("#job_button_4_start").click(function (event) { $.getJSON('/FunctionJob4Start', { },
    function(data) { }); return false; }); }); </script> 
    <script type=text/javascript> $(function() { $("#job_button_4_end").click(function (event) { $.getJSON('/FunctionJob4End', { },
    function(data) { }); return false; }); }); </script> 

    <!-- jobs 5 and 6 -->
    <script type=text/javascript> 
        $(function() { $("#job_button_5_start").click(function (event) { $.getJSON('/FunctionJob5Start', { }, function(data) { }); 
        return false; }); }); 
    </script> 
    <script type=text/javascript> $(function() { $("#job_button_5_end").click(function (event) { $.getJSON('/FunctionJob5End', { },
    function(data) { }); return false; }); }); </script> 
    <script type=text/javascript> $(function() { $("#job_button_6_start").click(function (event) { $.getJSON('/FunctionJob6Start', { },
    function(data) { }); return false; }); }); </script> 
    <script type=text/javascript> $(function() { $("#job_button_6_end").click(function (event) { $.getJSON('/FunctionJob6End', { },
    function(data) { }); return false; }); }); </script> 

    <!-- robots -->
    <script type=text/javascript> $(function() { $("#robot_button_1").click(function (event) { $.getJSON('/FunctionRobot', { },
    function(data) { }); return false; }); }); </script>
     
    

</head>

<br>
<br>

<!-- Declaring all global variables -->
<script type="text/javascript">
            
            var all_timer_0=0;
            var total_num_jobs=6;
            var flag_wholeExperiment=0
            // job1 global timer variables
            var timerElement_job1;
            var timerCounter_job1;
            var interval_job1;
            var job1_status=0;
            var run_flag_job1=0; // if 0 then job is not running, if 1 then running
            
            // job2 global timer variables
            var timerElement_job2;
            var timerCounter_job2;
            var interval_job2;
            var job2_status=0;
            var run_flag_job2=0;

            // job3 global timer variables
            var timerElement_job3;
            var timerCounter_job3;
            var interval_job3;
            var job3_status=0;
            var run_flag_job3=0;
            
            // job4 global timer variables
            var timerElement_job4;
            var timerCounter_job4;
            var interval_job4;
            var job4_status=0;
            var run_flag_job4=0;

            // job5 global timer variables
            var timerElement_job5;
            var timerCounter_job5;
            var interval_job5;
            var job5_status=0;
            var run_flag_job5=0;
            
            // job6 global timer variables
            var timerElement_job6;
            var timerCounter_job6;
            var interval_job6;
            var job6_status=0;
            var run_flag_job6=0;
        </script>

<!-- $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
     $$$$$$$$$$$$$$$$$  TIMER   $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
     $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
 -->
<body>
    <div id="wholeExperiment_timer">
        <p>Experiment Timer: Try to finish as many jobs as possible until the bar is 0!</p>
        <br>
        <span class="timer" id="timer_wholeExperiment" > 60s </span>
                <progress
                max="60"
                value="60"
                class="progress progress--set"
                id ="progressBar_wholeExperiment"
                ></progress>
    </div> 
        <script type="text/javascript">
        // timer
        timerElement_wholeExperiment=document.getElementById("timer_wholeExperiment");
        const progressBar=document.getElementById("progressBar_wholeExperiment");
        timerCounter_wholeExperiment=progressBar_wholeExperiment.max;
        interval_wholeExperiment=setInterval(function(){
        if (timerCounter_wholeExperiment<=1){
            clearInterval(interval_wholeExperiment);
            // Disable all job buttons
            document.getElementById("job_button_1_start").disabled = true;
            document.getElementById("job_button_1_end").disabled = true;
            document.getElementById("job_button_2_start").disabled = true;
            document.getElementById("job_button_2_end").disabled = true;
            document.getElementById("job_button_3_start").disabled = true;
            document.getElementById("job_button_3_end").disabled = true;
            document.getElementById("job_button_4_start").disabled = true;
            document.getElementById("job_button_4_end").disabled = true;
            document.getElementById("job_button_5_start").disabled = true;
            document.getElementById("job_button_5_end").disabled = true;
            document.getElementById("job_button_6_start").disabled = true;
            document.getElementById("job_button_6_end").disabled = true;

            

            
                    
            // writting the job end time (OF ALL JOBS) into the DB by calling the flask func for it
            $(function() { $.getJSON('/FunctionJob1End', { }, function(data) { }); return false;});
            $(function() { $.getJSON('/FunctionJob2End', { }, function(data) { }); return false;});
            $(function() { $.getJSON('/FunctionJob3End', { }, function(data) { }); return false;});
            $(function() { $.getJSON('/FunctionJob4End', { }, function(data) { }); return false;});
            $(function() { $.getJSON('/FunctionJob5End', { }, function(data) { }); return false;});
            $(function() { $.getJSON('/FunctionJob6End', { }, function(data) { }); return false;});

          



            // recording the status of job being finished
            all_timer_0=total_num_jobs;
            console.log(all_timer_0);
            check_timer_status();

            //setting the flag so that no other job can be started
            flag_wholeExperiment=1

            //notifying the user with an alert message
            alert("Time out!!! You can now press the Finish button to end the experiment")

            //not letting the progress bar continue even after Experiment timeout

            clearInterval(interval_job1);
            interval_job1 = undefined;
            progressBar_job1.max=progressBar_job1.value;

            clearInterval(interval_job2);
            interval_job2 = undefined;
            progressBar_job2.max=progressBar_job2.value;

            clearInterval(interval_job3);
            interval_job3 = undefined;
            progressBar_job3.max=progressBar_job3.value;

            clearInterval(interval_job4);
            interval_job4 = undefined;
            progressBar_job4.max=progressBar_job4.value;

            clearInterval(interval_job5);
            interval_job5 = undefined;
            progressBar_job5.max=progressBar_job5.value;

            clearInterval(interval_job6);
            interval_job6 = undefined;
            progressBar_job6.max=progressBar_job6.value;


            

            }
        timerCounter_wholeExperiment=timerCounter_wholeExperiment-1;
        timerElement_wholeExperiment.innerText=timerCounter_wholeExperiment+"s";
        progressBar_wholeExperiment.value=timerCounter_wholeExperiment;

        },1000);
        </script>
                
    
</body>
<br>
<br>

<!-- ***************************************************************************** -->      
<!-- *************   ROBOTS ***************   ROBOTS ***************************** -->
<!-- ***************************************************************************** --> 
<body>  

        <input type = "button" id = "robot_button_1" value = "Robot 1" />
        <div id="job_dependency"><p>Used by: Job 2, Job 4, Job 5 and Job 6</p></div>
        <br>
        <br>
        <input type = "button" id = "robot_button_2" value = "Robot 2" />
        <div id="job_dependency"><p>Used by: Job 1 and Job 6</p></div>
        <br>
        <br>
        <input type = "button" id = "robot_button_3" value = "Robot 3" />
        <div id="job_dependency"><p>Used by: Job 2, Job 3 and Job 6</p></div>

             
</body> 
<br>
<br>


<body>  
		

    <img id="firefighter_image" src="https://www.animatedimages.org/data/media/64/animated-fire-brigade-and-fire-department-image-0009.gif" alt="Firefighter with water Cannon" />     

    <!-- ***************************************************************************** --> 	<!-- *************   JOB 1 ***************   JOB 1 ******************************* -->
    <!-- ***************************************************************************** --> 

        <input type = "button" onclick="doDisable_job_1()" id = "job_button_1_start" value = "Job 1: Locate Fire Source" />
        <span class="timer" id="timer_job1" > 30s </span>
                <progress
                max="30"
                value="30"
                class="progress progress--set"
                id ="progressBar_job1"
                ></progress> 

        <script>
            function doDisable_job_1(){
                // setting the flag to 1 to indicate that this job is running
                run_flag_job1=1;

                // disabling its start button
                document.getElementById("job_button_1_start").disabled = true;

                // figuring out other dependencies
                document.getElementById("job_button_6_start").disabled = true;
                document.getElementById("job_button_6_end").disabled = true;

                document.getElementById("robot_button_2").disabled = true;
                
                // timer
                timerElement_job1=document.getElementById("timer_job1");
          		const progressBar=document.getElementById("progressBar_job1");
          		timerCounter_job1=progressBar_job1.max;
          		interval_job1=setInterval(function(){
            	if (timerCounter_job1<=1){
              		clearInterval(interval_job1);

                    // disabling itself
              		document.getElementById("job_button_1_start").disabled = true;
                	document.getElementById("job_button_1_end").disabled = true;
                    job1_status=1;
                    run_flag_job1=0;

                    //enabling other dependent jobs
                    /*
                    if (job2_status==0){
                	   document.getElementById("job_button_2_start").disabled = false;
                	   document.getElementById("job_button_2_end").disabled = false;
                        }
                    */
                    if (job6_status==0 && flag_wholeExperiment==0 && run_flag_job2==0 && run_flag_job3==0 && run_flag_job4==0 && run_flag_job5==0){
                       document.getElementById("job_button_6_start").disabled = false;
                       document.getElementById("job_button_6_end").disabled = false;
                        }

                	document.getElementById("robot_button_2").disabled = false;
                    
                    // writting the job end time into the DB by calling the flask func for it
                    $(function() { $.getJSON('/FunctionJob1End', { }, function(data) { }); return false;});

                    //writing that the job was completed into the DB
                    $(function() { $.getJSON('/FunctionJob1Complete', { }, function(data) { }); return false;});

                    // recording the status of job being finished
                    all_timer_0=all_timer_0+1;
                    console.log(all_timer_0);
                    check_timer_status();

            		}
            	timerCounter_job1=timerCounter_job1-1;
            	timerElement_job1.innerText=timerCounter_job1+"s";
            	progressBar_job1.value=timerCounter_job1;

          		},1000);
                

            }
        </script>

        <input type = "button" onclick="doEnable_job_1()" id = "job_button_1_end" value = "Stop Locating" />

        <script type="application/javascript">
            function doEnable_job_1(){
                // setting the flag to 0 to indicate that teh job is not running
                run_flag_job1=0;

                // enabling its start button
                document.getElementById("job_button_1_start").disabled = false;
                
                if (job6_status==0 && flag_wholeExperiment==0 && run_flag_job2==0 && run_flag_job3==0 && run_flag_job4==0 && run_flag_job5==0){
                    document.getElementById("job_button_6_start").disabled = false;
                    document.getElementById("job_button_6_end").disabled = false;
                }
                document.getElementById("robot_button_2").disabled = false;
                               

                //timer
                clearInterval(interval_job1);
                interval_job1 = undefined;
            	progressBar_job1.max=progressBar_job1.value;

            }
        </script>
        
</body> 
<br>
<br> 
    <!-- ***************************************************************************** -->    
    <!-- *************   JOB 2 ***************   JOB 2 ******************************* -->
    <!-- ***************************************************************************** --> 

<body>        
        <input type = "button" onclick="doDisable_job_2()" id = "job_button_2_start" value = "Job 2: Engage Water Cannon" />

        
        <span class="timer" id="timer_job2" > 15s </span>
                <progress
                max="15"
                value="15"
                class="progress progress--set"
                id ="progressBar_job2"
                ></progress> 

         
        <script>
            function doDisable_job_2(){
                // setting the flag to 1 to indicate that this job is running
                run_flag_job2=1;

                // disabling its start button
                document.getElementById("job_button_2_start").disabled = true;
                
                // figuring out other dependencies
                document.getElementById("robot_button_1").disabled = true;
                document.getElementById("robot_button_3").disabled = true;

                // disabling due to resource unavailability
                document.getElementById("job_button_3_start").disabled = true; //robot3
                document.getElementById("job_button_3_end").disabled = true;
                document.getElementById("job_button_4_start").disabled = true; //robot4
                document.getElementById("job_button_4_end").disabled = true;
                document.getElementById("job_button_5_start").disabled = true; 
                document.getElementById("job_button_5_end").disabled = true;
                document.getElementById("job_button_6_start").disabled = true; 
                document.getElementById("job_button_6_end").disabled = true;


                
                // timer
                timerElement_job2=document.getElementById("timer_job2");
          		const progressBar=document.getElementById("progressBar_job2");
          		timerCounter_job2=progressBar_job2.max;
          		interval_job2=setInterval(function(){
            	if (timerCounter_job2<=1){
                    job2_status=1;
                    run_flag_job2=0;
              		clearInterval(interval_job2);
                    //enabling dependencies
              		document.getElementById("robot_button_1").disabled = false;
                	document.getElementById("robot_button_3").disabled = false;


                    //enabling other jobs based on if they have already beein finished
                    if (job3_status==0 && flag_wholeExperiment==0 && run_flag_job6==0){
                        document.getElementById("job_button_3_start").disabled = false; //robot3
                        document.getElementById("job_button_3_end").disabled = false;
                    }
                    if (job4_status==0 && flag_wholeExperiment==0 && run_flag_job5==0 && run_flag_job6==0){
                        document.getElementById("job_button_4_start").disabled = false; //robot4
                        document.getElementById("job_button_4_end").disabled = false;
                    }
                    if (job5_status==0 && flag_wholeExperiment==0 && run_flag_job4==0 && run_flag_job6==0){
                        document.getElementById("job_button_5_start").disabled = false; //robot3
                        document.getElementById("job_button_5_end").disabled = false;
                    }
                    if (job6_status==0 && flag_wholeExperiment==0  && run_flag_job1==0 && run_flag_job3==0 && run_flag_job4==0 && run_flag_job5==0){
                        document.getElementById("job_button_6_start").disabled = false; //robot4
                        document.getElementById("job_button_6_end").disabled = false;
                    }

                    //disabling itself
                	document.getElementById("job_button_2_start").disabled = true;
                	document.getElementById("job_button_2_end").disabled = true;

                    // writting the job end time into the DB by calling the flask func for it
                    $(function() { $.getJSON('/FunctionJob2End', { }, function(data) { }); return false;});

                    //writing that the job was completed into the DB
                    $(function() { $.getJSON('/FunctionJob2Complete', { }, function(data) { }); return false;});

                    // recording the status of job being finished
                    all_timer_0=all_timer_0+1;
                    console.log(all_timer_0);
                    check_timer_status();
              		
            		}
            	timerCounter_job2=timerCounter_job2-1;
            	timerElement_job2.innerText=timerCounter_job2+"s";
            	progressBar_job2.value=timerCounter_job2;

          		},1000);
          		
            }
        </script>
        <input type = "button" onclick="doEnable_job_2()" id = "job_button_2_end" value = "Stop Water Cannon" />
        <script>
            function doEnable_job_2(){
                // setting the flag to 0 to indicate that the job is not running
                run_flag_job2=0;

                // enabling its start button
                document.getElementById("job_button_2_start").disabled = false;

                document.getElementById("robot_button_1").disabled = false;
                document.getElementById("robot_button_3").disabled = false;

                //enabling other jobs based on if they have already beein finished
                if (job3_status==0 && flag_wholeExperiment==0 && run_flag_job6==0){
                    document.getElementById("job_button_3_start").disabled = false; //robot3
                    document.getElementById("job_button_3_end").disabled = false;
                }
                if (job4_status==0 && flag_wholeExperiment==0 && run_flag_job5==0 && run_flag_job6==0){
                    document.getElementById("job_button_4_start").disabled = false; //robot4
                    document.getElementById("job_button_4_end").disabled = false;
                }
                if (job5_status==0 && flag_wholeExperiment==0 && run_flag_job4==0 && run_flag_job6==0){
                    document.getElementById("job_button_5_start").disabled = false; //robot3
                    document.getElementById("job_button_5_end").disabled = false;
                }
                if (job6_status==0 && flag_wholeExperiment==0 && run_flag_job1==0 && run_flag_job3==0 && run_flag_job4==0 && run_flag_job5==0){
                    document.getElementById("job_button_6_start").disabled = false; //robot4
                    document.getElementById("job_button_6_end").disabled = false;
                }

                //timer
                clearInterval(interval_job2);
                interval_job2 = undefined;
                progressBar_job2.max=progressBar_job2.value;

            }
        </script>

        

	
        
</body> 
<br>
<br> 
<body>
   <!-- ***************************************************************************** -->   <!-- *************   JOB 3 ***************   JOB 3 ******************************* -->
    <!-- ***************************************************************************** --> 
    <img id="victim_image" src="https://www.animatedimages.org/data/media/64/animated-fire-brigade-and-fire-department-image-0138.gif" alt="Firefighter rescuing Victim"> 

        <input type = "button" onclick="doDisable_job_3()" id = "job_button_3_start" value = "Job 3: Search for Victims" />
        <span class="timer" id="timer_job3" > 12s </span>
                <progress
                max="12"
                value="12"
                class="progress progress--set"
                id ="progressBar_job3"
                ></progress> 

        <script>
            function doDisable_job_3(){
                // setting the flag to 1 to indicate that this job is running
                run_flag_job3=1;

                // disabling its start button
                document.getElementById("job_button_3_start").disabled = true;
                
                // figuring out other dependencies
                document.getElementById("robot_button_3").disabled = true;

                document.getElementById("job_button_2_start").disabled = true;
                document.getElementById("job_button_2_end").disabled = true;
                document.getElementById("job_button_6_start").disabled = true;
                document.getElementById("job_button_6_end").disabled = true;
                

                // timer
                timerElement_job3=document.getElementById("timer_job3");
                const progressBar=document.getElementById("progressBar_job3");
                timerCounter_job3=progressBar_job3.max;
                interval_job3=setInterval(function(){
                if (timerCounter_job3<=1){
                    clearInterval(interval_job3);

                    // disabling itself
                    document.getElementById("job_button_3_start").disabled = true;
                    document.getElementById("job_button_3_end").disabled = true;
                    
                    job3_status=1;
                    run_flag_job3=0;
                    if (job2_status==0 && flag_wholeExperiment==0 && run_flag_job4==0 && run_flag_job5==0 && run_flag_job6==0){
                       document.getElementById("job_button_2_start").disabled = false;
                       document.getElementById("job_button_2_end").disabled = false;
                    }
                    if (job6_status==0 && flag_wholeExperiment==0 && run_flag_job1==0 && run_flag_job2==0 && run_flag_job4==0 && run_flag_job5==0){
                       document.getElementById("job_button_6_start").disabled = false;
                       document.getElementById("job_button_6_end").disabled = false;
                    }
                    
                    document.getElementById("robot_button_3").disabled = false;

                    // writting the job end time into the DB by calling the flask func for it
                    $(function() { $.getJSON('/FunctionJob3End', { }, function(data) { }); return false;});

                    //writing that the job was completed into the DB
                    $(function() { $.getJSON('/FunctionJob3Complete', { }, function(data) { }); return false;});

                    // recording the status of job being finished
                    all_timer_0=all_timer_0+1;
                    console.log(all_timer_0);
                    check_timer_status();

                    }
                timerCounter_job3=timerCounter_job3-1;
                timerElement_job3.innerText=timerCounter_job3+"s";
                progressBar_job3.value=timerCounter_job3;

                },1000);
                

            }
        </script>

        <input type = "button" onclick="doEnable_job_3()" id = "job_button_3_end" value = "Stop Searching" />

        <script type="application/javascript">
            function doEnable_job_3(){

                // setting the flag to 0 to indicate that the job is not running
                run_flag_job3=0;

                // enabling its start button
                document.getElementById("job_button_3_start").disabled = false;
                
                document.getElementById("robot_button_3").disabled = false;

                if (job2_status==0 && flag_wholeExperiment==0 && run_flag_job4==0 && run_flag_job5==0 && run_flag_job6==0){
                    document.getElementById("job_button_2_start").disabled = false;
                    document.getElementById("job_button_2_end").disabled = false;
                }
                if (job6_status==0 && flag_wholeExperiment==0 && run_flag_job1==0 && run_flag_job2==0 && run_flag_job4==0 && run_flag_job5==0){
                    document.getElementById("job_button_6_start").disabled = false;
                    document.getElementById("job_button_6_end").disabled = false;
                }
                

                //timer
                clearInterval(interval_job3);
                interval_job3 = undefined;
                progressBar_job3.max=progressBar_job3.value;

            }
        </script>
        
</body> 
<br>
<br> 
    <!-- ***************************************************************************** -->    
    <!-- *************   JOB 4 ***************   JOB 4 ******************************* -->
    <!-- ***************************************************************************** -->  
<body>  

        

        <input type = "button" onclick="doDisable_job_4()" id = "job_button_4_start" value = "Job 4: Aid Victim" />

        
        <span class="timer" id="timer_job4" > 33s </span>
                <progress
                max="33"
                value="33"
                class="progress progress--set"
                id ="progressBar_job4"
                ></progress> 

         
        <script>
            function doDisable_job_4(){
                // setting the flag to 1 to indicate that this job is running
                run_flag_job4=1;
                

                // disabling its start button
                document.getElementById("job_button_4_start").disabled = true;

                // figuring out other dependencies
                document.getElementById("robot_button_1").disabled = true;

                document.getElementById("job_button_2_start").disabled = true;
                document.getElementById("job_button_2_end").disabled = true;
                document.getElementById("job_button_5_start").disabled = true;
                document.getElementById("job_button_5_end").disabled = true;
                document.getElementById("job_button_6_start").disabled = true;
                document.getElementById("job_button_6_end").disabled = true;
                

                
                // timer
                timerElement_job4=document.getElementById("timer_job4");
                const progressBar=document.getElementById("progressBar_job4");
                timerCounter_job4=progressBar_job4.max;
                interval_job4=setInterval(function(){
                if (timerCounter_job4<=1){
                    job4_status=1;
                    run_flag_job4=0;
                    clearInterval(interval_job4);

                    //enabling the robot
                    document.getElementById("robot_button_1").disabled = false;

                    //enabling other jobs based on if they have already beein finished
                    if (job2_status==0 && flag_wholeExperiment==0 && run_flag_job3==0 &&run_flag_job5==0 && run_flag_job6==0){
                        document.getElementById("job_button_2_start").disabled = false; //robot3
                        document.getElementById("job_button_2_end").disabled = false;
                    }
                    if (job5_status==0 && flag_wholeExperiment==0 && run_flag_job2==0 && run_flag_job6==0){
                        document.getElementById("job_button_5_start").disabled = false; //robot3
                        document.getElementById("job_button_5_end").disabled = false;
                    }
                    if (job6_status==0 && flag_wholeExperiment==0 && run_flag_job1==0 && run_flag_job2==0 && run_flag_job3==0 && run_flag_job5==0){
                        document.getElementById("job_button_6_start").disabled = false; //robot4
                        document.getElementById("job_button_6_end").disabled = false;
                    }


                    //disabling itself
                    document.getElementById("job_button_4_start").disabled = true;
                    document.getElementById("job_button_4_end").disabled = true;

                    // writting the job end time into the DB by calling the flask func for it
                    $(function() { $.getJSON('/FunctionJob4End', { }, function(data) { }); return false;});

                    //writing that the job was completed into the DB
                    $(function() { $.getJSON('/FunctionJob4Complete', { }, function(data) { }); return false;});

                    // recording the status of job being finished
                    all_timer_0=all_timer_0+1;
                    console.log(all_timer_0);
                    check_timer_status();
                    
                    }
                timerCounter_job4=timerCounter_job4-1;
                timerElement_job4.innerText=timerCounter_job4+"s";
                progressBar_job4.value=timerCounter_job4;

                },1000);
                
            }
        </script>
        <input type = "button" onclick="doEnable_job_4()" id = "job_button_4_end" value = "Stop Aiding" />
        <script>
            function doEnable_job_4(){
                // setting the flag to 0 to indicate that teh job is not running
                run_flag_job4=0;

                // enabling its start button
                document.getElementById("job_button_4_start").disabled = false;
                
                document.getElementById("robot_button_1").disabled = false;

                //enabling other jobs based on if they have already beein finished
                if (job2_status==0 && flag_wholeExperiment==0 && run_flag_job3==0 &&run_flag_job5==0 && run_flag_job6==0){
                    document.getElementById("job_button_2_start").disabled = false; //robot3
                    document.getElementById("job_button_2_end").disabled = false;
                }
                if (job5_status==0 && flag_wholeExperiment==0 && run_flag_job2==0 && run_flag_job6==0){
                    document.getElementById("job_button_5_start").disabled = false; //robot3
                    document.getElementById("job_button_5_end").disabled = false;
                }
                if (job6_status==0 && flag_wholeExperiment==0 && run_flag_job1==0 && run_flag_job2==0 && run_flag_job3==0 && run_flag_job5==0){
                    document.getElementById("job_button_6_start").disabled = false; //robot4
                    document.getElementById("job_button_6_end").disabled = false;
                }
                

                //timer
                clearInterval(interval_job4);
                interval_job4 = undefined;
                progressBar_job4.max=progressBar_job4.value;

            }
        </script>

           
        
</body>   

<br>
<br>

<body>

    <!-- ***************************************************************************** -->  <!-- *************   JOB 5 ***************   JOB 5 ******************************* -->
    <!-- ***************************************************************************** --> 
    <img id="truck_image" src="https://www.animatedimages.org/data/media/64/animated-fire-brigade-and-fire-department-image-0033.gif" alt="Firefighter Truck"> 

        <input type = "button" onclick="doDisable_job_5()" id = "job_button_5_start" value = "Job 5: Request for Tools" />
        <span class="timer" id="timer_job5" > 6s </span>
                <progress
                max="6"
                value="6"
                class="progress progress--set"
                id ="progressBar_job5"
                ></progress> 

        <script>
            function doDisable_job_5(){
                // setting the flag to 1 to indicate that this job is running
                run_flag_job5=1;

                // disabling its start button
                document.getElementById("job_button_5_start").disabled = true;
                
                // figuring out other dependencies
                document.getElementById("job_button_2_start").disabled = true;
                document.getElementById("job_button_2_end").disabled = true;
                document.getElementById("job_button_4_start").disabled = true; //uses Robot1
                document.getElementById("job_button_4_end").disabled = true;
                document.getElementById("job_button_6_start").disabled = true; //uses Robot1
                document.getElementById("job_button_6_end").disabled = true;

                document.getElementById("robot_button_1").disabled = true;

                // timer
                timerElement_job5=document.getElementById("timer_job5");
                const progressBar=document.getElementById("progressBar_job5");
                timerCounter_job5=progressBar_job5.max;
                interval_job5=setInterval(function(){
                if (timerCounter_job5<=1){
                    job5_status=1;
                    run_flag_job5=0;
                    clearInterval(interval_job5);

                    // disabling itself
                    document.getElementById("job_button_5_start").disabled = true;
                    document.getElementById("job_button_5_end").disabled = true;
                    
                    //releasing other jobs that could not be run due to Robot1 unavailability
                    if (job2_status==0 && flag_wholeExperiment==0 && run_flag_job3==0 && run_flag_job4==0 && run_flag_job6==0){
                        document.getElementById("job_button_2_start").disabled = false; //robot3
                        document.getElementById("job_button_2_end").disabled = false;
                    }
                    if (job4_status==0 && flag_wholeExperiment==0 && run_flag_job2==0 && run_flag_job6==0){
                        document.getElementById("job_button_4_start").disabled = false; //robot3
                        document.getElementById("job_button_4_end").disabled = false;
                    }
                    if (job6_status==0 && flag_wholeExperiment==0 && run_flag_job1==0 && run_flag_job2==0 && run_flag_job3==0 && run_flag_job4==0){
                        document.getElementById("job_button_6_start").disabled = false; //robot4
                        document.getElementById("job_button_6_end").disabled = false;
                    }
                        

                    document.getElementById("robot_button_1").disabled = false;

                    // writting the job end time into the DB by calling the flask func for it
                    $(function() { $.getJSON('/FunctionJob5End', { }, function(data) { }); return false;});

                    //writing that the job was completed into the DB
                    $(function() { $.getJSON('/FunctionJob5Complete', { }, function(data) { }); return false;});

                    // recording the status of job being finished
                    all_timer_0=all_timer_0+1;
                    console.log(all_timer_0);
                    check_timer_status();

                    }
                timerCounter_job5=timerCounter_job5-1;
                timerElement_job5.innerText=timerCounter_job5+"s";
                progressBar_job5.value=timerCounter_job5;

                },1000);
                

            }
        </script>

        <input type = "button" onclick="doEnable_job_5()" id = "job_button_5_end" value = "Stop Request" />

        <script type="application/javascript">
            function doEnable_job_5(){
                // setting the flag to 0 to indicate that teh job is not running
                run_flag_job5=0;

                // enabling its start button
                document.getElementById("job_button_5_start").disabled = false;

                //releasing other jobs that could not be run due to Robot1 unavailability
                if (job2_status==0 && flag_wholeExperiment==0 && run_flag_job3==0 && run_flag_job4==0 && run_flag_job6==0){
                    document.getElementById("job_button_2_start").disabled = false; //robot3
                    document.getElementById("job_button_2_end").disabled = false;
                }
                if (job4_status==0 && flag_wholeExperiment==0 && run_flag_job2==0 && run_flag_job6==0){
                    document.getElementById("job_button_4_start").disabled = false; //robot3
                    document.getElementById("job_button_4_end").disabled = false;
                }
                if (job6_status==0 && flag_wholeExperiment==0 && run_flag_job1==0 && run_flag_job2==0 && run_flag_job3==0 && run_flag_job4==0){
                    document.getElementById("job_button_6_start").disabled = false; //robot4
                    document.getElementById("job_button_6_end").disabled = false;
                }

                document.getElementById("robot_button_1").disabled = false;
                

                //timer
                clearInterval(interval_job5);
                interval_job5 = undefined;
                progressBar_job5.max=progressBar_job5.value;

            }
        </script>
        
</body> 
<br>
<br> 
    <!-- ***************************************************************************** -->    
    <!-- *************   JOB 6 ***************   JOB 6 ******************************* -->
    <!-- ***************************************************************************** -->  
<body>        
        <input type = "button" onclick="doDisable_job_6()" id = "job_button_6_start" value = "Job 6: Critical Operation" />

        
        <span class="timer" id="timer_job6" > 9s </span>
                <progress
                max="9"
                value="9"
                class="progress progress--set"
                id ="progressBar_job6"
                ></progress> 

         
        <script>
            function doDisable_job_6(){
                // setting the flag to 1 to indicate that this job is running
                run_flag_job6=1;

                // disabling its start button
                document.getElementById("job_button_6_start").disabled = true;
                
                // figuring out other dependencies
                document.getElementById("robot_button_1").disabled = true;
                document.getElementById("robot_button_2").disabled = true;
                document.getElementById("robot_button_3").disabled = true;

                // disabling due to resource unavailability (as it uses all resources)
                document.getElementById("job_button_1_start").disabled = true; 
                document.getElementById("job_button_1_end").disabled = true;
                document.getElementById("job_button_2_start").disabled = true; 
                document.getElementById("job_button_2_end").disabled = true;
                document.getElementById("job_button_3_start").disabled = true; 
                document.getElementById("job_button_3_end").disabled = true;
                document.getElementById("job_button_4_start").disabled = true; 
                document.getElementById("job_button_4_end").disabled = true;
                document.getElementById("job_button_5_start").disabled = true; 
                document.getElementById("job_button_5_end").disabled = true;

                //disabling its "STOP" button as this is a high priority job
                document.getElementById("job_button_6_end").disabled = true;


                
                // timer
                timerElement_job6=document.getElementById("timer_job6");
                const progressBar=document.getElementById("progressBar_job6");
                timerCounter_job6=progressBar_job6.max;
                interval_job6=setInterval(function(){
                if (timerCounter_job6<=1){
                    job6_status=1;
                    run_flag_job6=0;
                    clearInterval(interval_job6);
                    //enabling dependencies
                    document.getElementById("robot_button_1").disabled = false;
                    document.getElementById("robot_button_2").disabled = false;
                    document.getElementById("robot_button_3").disabled = false;

                    //enabling all other job buttons if they have not been completed yet

                    if (job1_status==0 && flag_wholeExperiment==0){
                        document.getElementById("job_button_1_start").disabled = false; 
                        document.getElementById("job_button_1_end").disabled = false;
                    }

                    if (job2_status==0 && flag_wholeExperiment==0 && run_flag_job3==0 && run_flag_job4==0 && run_flag_job5==0){
                        document.getElementById("job_button_2_start").disabled = false; 
                        document.getElementById("job_button_2_end").disabled = false;
                    }
                    if (job3_status==0 && flag_wholeExperiment==0 && run_flag_job2==0){
                        document.getElementById("job_button_3_start").disabled = false; 
                        document.getElementById("job_button_3_end").disabled = false;
                    }
                    if (job4_status==0 && flag_wholeExperiment==0 && run_flag_job2==0 && run_flag_job5==0){
                        document.getElementById("job_button_4_start").disabled = false; 
                        document.getElementById("job_button_4_end").disabled = false;
                    }
                    if (job5_status==0 && flag_wholeExperiment==0 && run_flag_job2==0 && run_flag_job4==0){
                        document.getElementById("job_button_5_start").disabled = false; 
                        document.getElementById("job_button_5_end").disabled = false;
                    }
                    //disabling itself
                    document.getElementById("job_button_6_start").disabled = true;
                    document.getElementById("job_button_6_end").disabled = true;

                    // writting the job end time into the DB by calling the flask func for it
                    $(function() { $.getJSON('/FunctionJob6End', { }, function(data) { }); return false;});

                    //writing that the job was completed into the DB
                    $(function() { $.getJSON('/FunctionJob6Complete', { }, function(data) { }); return false;});

                    // recording the status of job being finished
                    all_timer_0=all_timer_0+1;
                    console.log(all_timer_0);
                    check_timer_status();
                    
                    }
                timerCounter_job6=timerCounter_job6-1;
                timerElement_job6.innerText=timerCounter_job6+"s";
                progressBar_job6.value=timerCounter_job6;

                },1000);
                
            }
        </script>
        <input type = "button" onclick="doEnable_job_6()" id = "job_button_6_end" value = "Stop Critical Operation" />
        <script>
            function doEnable_job_6(){
                // setting the flag to 0 to indicate that teh job is not running
                run_flag_job6=0;

                // enabling its start button
                document.getElementById("job_button_6_start").disabled = false;

                // enabling its start button
                document.getElementById("job_button_6_start").disabled = false;

                document.getElementById("robot_button_1").disabled = false;
                document.getElementById("robot_button_2").disabled = false;
                document.getElementById("robot_button_3").disabled = false;


                //enabling all other job buttons if they have not been completed yet

                    if (job1_status==0 && flag_wholeExperiment==0){
                        document.getElementById("job_button_1_start").disabled = false; 
                        document.getElementById("job_button_1_end").disabled = false;
                    }

                    if (job2_status==0 && flag_wholeExperiment==0 && run_flag_job3==0 && run_flag_job4==0 && run_flag_job5==0){
                        document.getElementById("job_button_2_start").disabled = false; 
                        document.getElementById("job_button_2_end").disabled = false;
                    }
                    if (job3_status==0 && flag_wholeExperiment==0 && run_flag_job2==0){
                        document.getElementById("job_button_3_start").disabled = false; 
                        document.getElementById("job_button_3_end").disabled = false;
                    }
                    if (job4_status==0 && flag_wholeExperiment==0 && run_flag_job2==0 && run_flag_job5==0){
                        document.getElementById("job_button_4_start").disabled = false; 
                        document.getElementById("job_button_4_end").disabled = false;
                    }
                    if (job5_status==0 && flag_wholeExperiment==0 && run_flag_job2==0 && run_flag_job4==0){
                        document.getElementById("job_button_5_start").disabled = false; 
                        document.getElementById("job_button_5_end").disabled = false;
                    }

                //timer
                clearInterval(interval_job6);
                interval_job6 = undefined;
                progressBar_job6.max=progressBar_job6.value;

            }
        </script>

        
</body> 

<!-- END of JOBS $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->


<br>
<br> 

<div><img id="extinguisher_image" src="https://www.animatedimages.org/data/media/64/animated-fire-brigade-and-fire-department-image-0057.gif" alt="Fire Extinguisher">
</div>


<body>  
    <a href="{{ url_for('thank') }}">      
        <input type = "button" id = "next_button_1" value = "FINISH" />
        <script type="text/javascript">
        document.getElementById("next_button_1").disabled = true;
            
        
        function check_timer_status(){
            if (all_timer_0==total_num_jobs || flag_wholeExperiment==1){
                document.getElementById("next_button_1").disabled = false;


                
                }
            else{
                document.getElementById("next_button_1").disabled = true; 
                //console.log("else");
                //console.log(all_timer_0);  
                }

        

        }
        </script>
    </a>
</body> 




</html>